<%#
LuCI - Lua Configuration Interface
Copyright 2008 Steven Barth <steven@midlink.org>
Copyright 2008 Jo-Philipp Wich <xm@leipzig.freifunk.net>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0

$Id$

-%>
<div class="clear"></div>
</div>
</div>
<%
-- check new theme can be supported
local cur_system, cur_model = luci.sys.sysinfo()
local unsupportlist = {"WR703N"}
local tsupport = true
for i, dev in pairs(unsupportlist) do
	if string.find(cur_model, dev) then
		tsupport = false
		break
	end
end
if tsupport then
%>
<script type="text/javascript">//<![CDATA[
    function settheme()
    {
        XHR.get('<%=luci.dispatcher.build_url("rpc", "settheme")%>',
			{ theme: "avalon" },
            function(x, resp)
            {
				if (resp.ret == '0')
				{
					window.location = '<%=luci.dispatcher.build_url("avalon", "page", "index")%>';
				}
            }
        );
    }
//]]></script>
<% end %>

<p class="luci">Powered by <%= luci.__appname__ .. " (" .. luci.__version__ .. ")" %></p>
<% if tsupport then %>
<p><a href="#" onclick="settheme()">Change Theme</a></p>
<% end %>
</body>
</html>
